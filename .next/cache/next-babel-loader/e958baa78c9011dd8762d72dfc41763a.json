{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.formatUrl = formatUrl;\nvar _querystring = require(\"querystring\"); // Format function modified from nodejs\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\nvar slashedProtocols = /https?|ftp|gopher|file/;\nfunction formatUrl(urlObj) {\n  var auth = urlObj.auth,\n    hostname = urlObj.hostname;\n  var protocol = urlObj.protocol || '';\n  var pathname = urlObj.pathname || '';\n  var hash = urlObj.hash || '';\n  var query = urlObj.query || '';\n  var host = false;\n  auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : '';\n  if (urlObj.host) {\n    host = auth + urlObj.host;\n  } else if (hostname) {\n    host = auth + (~hostname.indexOf(':') ? \"[\".concat(hostname, \"]\") : hostname);\n    if (urlObj.port) {\n      host += ':' + urlObj.port;\n    }\n  }\n  if (query && typeof query === 'object') {\n    // query = '' + new URLSearchParams(query);\n    query = (0, _querystring.encode)(query);\n  }\n  var search = urlObj.search || query && \"?\".concat(query) || '';\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n  if (urlObj.slashes || (!protocol || slashedProtocols.test(protocol)) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname[0] !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n  if (hash && hash[0] !== '#') hash = '#' + hash;\n  if (search && search[0] !== '?') search = '?' + search;\n  pathname = pathname.replace(/[?#]/g, encodeURIComponent);\n  search = search.replace('#', '%23');\n  return \"\".concat(protocol).concat(host).concat(pathname).concat(search).concat(hash);\n}","map":{"version":3,"sources":["../../../../../next-server/lib/router/utils/format-url.ts"],"names":["slashedProtocols","formatUrl","urlObj","auth","hostname","protocol","pathname","hash","query","host","encodeURIComponent","replace","indexOf","port","search","substr","slashes","test"],"mappings":"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","sourcesContent":["// Format function modified from nodejs\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nimport { UrlObject } from 'url'\nimport { encode as encodeQuerystring } from 'querystring'\n\nconst slashedProtocols = /https?|ftp|gopher|file/\n\nexport function formatUrl(urlObj: UrlObject) {\n  let { auth, hostname } = urlObj\n  let protocol = urlObj.protocol || ''\n  let pathname = urlObj.pathname || ''\n  let hash = urlObj.hash || ''\n  let query = urlObj.query || ''\n  let host: string | false = false\n\n  auth = auth ? encodeURIComponent(auth).replace(/%3A/i, ':') + '@' : ''\n\n  if (urlObj.host) {\n    host = auth + urlObj.host\n  } else if (hostname) {\n    host = auth + (~hostname.indexOf(':') ? `[${hostname}]` : hostname)\n    if (urlObj.port) {\n      host += ':' + urlObj.port\n    }\n  }\n\n  if (query && typeof query === 'object') {\n    // query = '' + new URLSearchParams(query);\n    query = encodeQuerystring(query)\n  }\n\n  let search = urlObj.search || (query && `?${query}`) || ''\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':'\n\n  if (\n    urlObj.slashes ||\n    ((!protocol || slashedProtocols.test(protocol)) && host !== false)\n  ) {\n    host = '//' + (host || '')\n    if (pathname && pathname[0] !== '/') pathname = '/' + pathname\n  } else if (!host) {\n    host = ''\n  }\n\n  if (hash && hash[0] !== '#') hash = '#' + hash\n  if (search && search[0] !== '?') search = '?' + search\n\n  pathname = pathname.replace(/[?#]/g, encodeURIComponent)\n  search = search.replace('#', '%23')\n\n  return `${protocol}${host}${pathname}${search}${hash}`\n}\n"]},"metadata":{},"sourceType":"script"}